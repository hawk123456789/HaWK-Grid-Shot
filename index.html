<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Web-Hawk Aim Trainer: Dynamic Difficulty</title>
    <style>
        :root {
            --primary-color: #2ecc71;
            --play-area-bg: #2c3e50;
        }

        body {
            background-color: #f4f7f6;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin: 0;
            touch-action: manipulation;
        }

        .stat-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 900px;
        }

        .stat-box {
            text-align: center;
            flex: 1;
        }

        .stat-label {
            margin: 0;
            color: #7f8c8d;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .stat-value {
            margin: 0;
            color: #2c3e50;
            font-size: clamp(1.2rem, 5vw, 1.8rem);
        }

        #play-area {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 60vh;
            max-height: 500px;
            background: var(--play-area-bg);
            border-radius: 20px;
            overflow: hidden;
            cursor: crosshair;
            border: 4px solid #34495e;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤ */
        .target {
            position: absolute;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(214, 48, 49, 0.6);
            touch-action: none;
            transition: transform 0.05s;
        }

        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
        }

        #start-btn {
            padding: 12px 40px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
        }

        .volume-box {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #7f8c8d;
            font-size: 14px;
        }
    </style>
</head>

<body>

    <div class="stat-container">
        <div class="stat-box">
            <p class="stat-label">SCORE</p>
            <h2 id="score" class="stat-value">0</h2>
        </div>
        <div class="stat-box">
            <p class="stat-label">ACCURACY</p>
            <h2 id="accuracy" class="stat-value">100%</h2>
        </div>
        <div class="stat-box">
            <p class="stat-label">TIME</p>
            <h2 id="timer" class="stat-value" style="color: #e74c3c;">30s</h2>
        </div>
    </div>

    <div id="play-area"></div>

    <div class="controls">
        <button id="start-btn">START TRAINING</button>
        <div class="volume-box">
            <span>üîà</span>
            <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.5">
            <span id="volume-label">50%</span>
            <span>üîä</span>
        </div>
        <div id="level-display" style="color: #34495e; font-weight: bold;">Level: 1 (Easy)</div>
    </div>

    <script>
        (function () {
            let score = 0, totalClicks = 0, hits = 0;
            let bullseyeHits = 0, outerHits = 0, totalMisses = 0;
            let timeLeft = 30, gameActive = false, timerInterval;
            let lastPositions = [];

            const hitSound = new Audio('https://www.soundjay.com/buttons/sounds/button-3.mp3');
            const missSound = new Audio('https://www.soundjay.com/buttons/sounds/button-10.mp3');

            const playArea = document.getElementById('play-area');
            const scoreEl = document.getElementById('score');
            const accuracyEl = document.getElementById('accuracy');
            const timerEl = document.getElementById('timer');
            const volInput = document.getElementById('volume-control');
            const volLabel = document.getElementById('volume-label');
            const startBtn = document.getElementById('start-btn');
            const levelEl = document.getElementById('level-display');

            function updateVolume() {
                hitSound.volume = missSound.volume = volInput.value;
                volLabel.innerText = Math.round(volInput.value * 100) + '%';
            }
            volInput.addEventListener('input', updateVolume);
            updateVolume();

            playArea.addEventListener('pointerdown', (e) => {
                if (!gameActive || e.target !== playArea) return;
                missSound.currentTime = 0; missSound.play();
                totalClicks++; totalMisses++;
                score = Math.max(0, score - 50);
                updateStats();
            });

            startBtn.addEventListener('click', () => {
                if (gameActive) return;
                score = 0; totalClicks = 0; hits = 0; bullseyeHits = 0; outerHits = 0; totalMisses = 0;
                timeLeft = 30; gameActive = true;
                playArea.innerHTML = '';
                startBtn.style.visibility = 'hidden';
                updateStats();
                for (let i = 0; i < 3; i++) createTarget();
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timerEl.innerText = timeLeft + 's';
                    if (timeLeft <= 0) endGame();
                }, 1000);
            });

            function createTarget() {
                if (!gameActive) return;
                const target = document.createElement('div');
                target.className = 'target';
                const spawnTime = Date.now();

                // --- üéØ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---
                let currentSize = 35; // ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÇ‡∏õ‡∏£)
                let levelName = "Pro";

                if (score <= 1500) {
                    currentSize = 70; // ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©
                    levelName = "Level 1: Easy";
                } else if (score <= 2500) {
                    currentSize = 56; // ‡∏•‡∏î‡∏•‡∏á 20% ‡∏à‡∏≤‡∏Å 70
                    levelName = "Level 2: Medium";
                } else if (score <= 4000) {
                    currentSize = 45; // ‡∏•‡∏î‡∏•‡∏á‡∏≠‡∏µ‡∏Å 20% ‡∏à‡∏≤‡∏Å 56
                    levelName = "Level 3: Hard";
                } else {
                    currentSize = 35; // ‡πÄ‡∏•‡πá‡∏Å‡∏™‡∏∏‡∏î
                    levelName = "Level 4: PRO MODE";
                }

                levelEl.innerText = levelName;
                target.style.width = currentSize + 'px';
                target.style.height = currentSize + 'px';
                target.style.background = `radial-gradient(circle, #ff7675 0%, #ff7675 25%, #d63031 26%, #d63031 100%)`;

                let x, y, isTooClose;
                do {
                    isTooClose = false;
                    x = Math.random() * (playArea.clientWidth - currentSize - 10);
                    y = Math.random() * (playArea.clientHeight - currentSize - 10);
                    lastPositions.forEach(p => {
                        if (Math.sqrt(Math.pow(x - p.x, 2) + Math.pow(y - p.y, 2)) < 100) isTooClose = true;
                    });
                } while (isTooClose);

                const posObj = { x, y, id: Math.random() };
                lastPositions.push(posObj);
                target.style.left = x + 'px'; target.style.top = y + 'px';

                target.addEventListener('pointerdown', (e) => {
                    e.stopPropagation();
                    if (Date.now() - spawnTime < 150) return; // Anti-cheat

                    hitSound.currentTime = 0; hitSound.play();
                    const rect = target.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const clickX = e.clientX - rect.left;
                    const clickY = e.clientY - rect.top;

                    const dist = Math.sqrt(Math.pow(clickX - centerX, 2) + Math.pow(clickY - centerY, 2));

                    // Bullseye ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏¢‡∏∞ 25% ‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏±‡πâ‡∏ô
                    if (dist <= (rect.width * 0.25)) {
                        bullseyeHits++; score += 150;
                    } else {
                        outerHits++; score += 100;
                    }

                    hits++; totalClicks++;
                    lastPositions = lastPositions.filter(p => p.id !== posObj.id);
                    target.remove();
                    createTarget();
                    updateStats();
                    if (navigator.vibrate) navigator.vibrate(20);
                });
                playArea.appendChild(target);
            }

            function updateStats() {
                scoreEl.innerText = score;
                accuracyEl.innerText = (totalClicks === 0 ? 100 : Math.round((hits / totalClicks) * 100)) + '%';
            }

            function endGame() {
                gameActive = false;
                clearInterval(timerInterval);
                const bullP = hits === 0 ? 0 : Math.round((bullseyeHits / hits) * 100);
                const outerP = hits === 0 ? 0 : Math.round((outerHits / hits) * 100);

                alert(`üéØ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å\n------------------\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${score}\n‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥: ${accuracyEl.innerText}\n\nüìç ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏à‡∏∏‡∏î‡∏ï‡∏Å‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô:\n- Bullseye (‡∏Å‡∏•‡∏≤‡∏á): ${bullseyeHits} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (${bullP}%)\n- Outer (‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å): ${outerHits} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (${outerP}%)\n\n‚ùå ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏•‡∏≤‡∏î: ${totalMisses} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`);

                startBtn.style.visibility = 'visible';
                startBtn.innerText = 'TRAIN AGAIN';
            }
        })();
    </script>
</body>

</html>